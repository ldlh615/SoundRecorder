<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
	<script src="./soundRecorder.js"></script>
	<style>
		button {
			display: block;
			margin: 10px 0;
		}
	</style>
</head>

<body>
	<audio id="audio" controls autoplay preload="auto"></audio>
	<button id="startRecord">startRecord</button>
	<button id="stopRecord">stopRecord</button>
	<button id="onVoiceRecordEnd">onVoiceRecordEnd</button>
	<button id="playVoice">playVoice</button>
	<button id="pauseVoice">pauseVoice</button>
	<button id="stopVoice">stopVoice</button>
	<button id="onVoicePlayEnd">onVoicePlayEnd</button>
	<button id="uploadVoice">uploadVoice</button>
	<button id="getBlob">getBlob</button>

	<script>
		$(() => {
			// 确保SoundRecorder已加载完毕
			console.log('has SoundRecorder: ', !!SoundRecorder)

			// 定义参数
			const options = {

			}

			// 实例化
			window.sr = new SoundRecorder(options)

			console.log(sr)

			// 注册生命周期回调
			sr.on('error', (e) => {
				console.log(e)
			})
			sr.on('startRecord', (e) => {
				console.log(e)
			})
			sr.on('stopRecord', (e) => {
				console.log(e)
			})

			// 点击事件
			$('#startRecord').click(() => {
				let recOptions = {
					duration: 10000,
				}
				sr.startRecord(recOptions)
			})
			$('#stopRecord').click(() => {
				sr.stopRecord()
			})



		})

	</script>
</body>

</html>